"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[888],{6888:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var t=a(5043),i=a(579);const n=function(){const[e,s]=(0,t.useState)(""),[a,n]=(0,t.useState)(""),[r,c]=(0,t.useState)(!1),[l,d]=(0,t.useState)(null),[o,m]=(0,t.useState)(!1),[h,u]=(0,t.useState)(!1),[p,x]=(0,t.useState)([]),[g,j]=(0,t.useState)(!1),v=()=>{u(!1),x([])};return(0,i.jsx)("div",{id:"api",children:(0,i.jsxs)("div",{className:"api-page",children:[(0,i.jsxs)("div",{className:"api-container",children:[(0,i.jsxs)("div",{className:"api-header",children:[(0,i.jsx)("h1",{children:"API Testing Dashboard"}),(0,i.jsx)("p",{children:"Test Robert's backend API endpoints with real-time validation and monitoring."}),(0,i.jsx)("p",{children:"After submitting your test message, view all stored messages in the database:"}),(0,i.jsx)("button",{className:"highlight-link",onClick:async()=>{j(!0);try{const e=await fetch("https://portfolio-backend-jet-phi.vercel.app/api/messages",{mode:"cors"});if(!e.ok)throw new Error("HTTP ".concat(e.status,": ").concat(e.statusText));{const s=await e.json(),a=Array.isArray(s)?s.sort(((e,s)=>new Date(s.created_at||s.timestamp||0)-new Date(e.created_at||e.timestamp||0))):[];x(a),u(!0)}}catch(l){console.error("Failed to fetch messages:",l),"TypeError"===l.name&&l.message.includes("Failed to fetch")?d("CORS Error: Cannot fetch messages due to server configuration. Backend needs CORS headers."):d("Failed to fetch messages: ".concat(l.message))}finally{j(!1)}},disabled:g,children:g?"Loading Messages...":"View All Messages Database"})]}),(0,i.jsxs)("div",{className:"api-content",children:[(0,i.jsxs)("div",{className:"api-info-card",children:[(0,i.jsx)("h2",{children:"API Endpoint"}),(0,i.jsx)("div",{className:"endpoint-display",children:"POST /api/messages"}),(0,i.jsxs)("div",{className:"api-features",children:[(0,i.jsxs)("div",{className:"feature-item",children:[(0,i.jsx)("div",{className:"feature-icon",children:"\u2713"}),(0,i.jsx)("div",{className:"feature-text",children:"Real-time message processing"})]}),(0,i.jsxs)("div",{className:"feature-item",children:[(0,i.jsx)("div",{className:"feature-icon",children:"\u26a1"}),(0,i.jsx)("div",{className:"feature-text",children:"Instant validation & response"})]}),(0,i.jsxs)("div",{className:"feature-item",children:[(0,i.jsx)("div",{className:"feature-icon",children:"\ud83d\udd12"}),(0,i.jsx)("div",{className:"feature-text",children:"Secure data transmission"})]}),(0,i.jsxs)("div",{className:"feature-item",children:[(0,i.jsx)("div",{className:"feature-icon",children:"\ud83d\udcca"}),(0,i.jsx)("div",{className:"feature-text",children:"Persistent data storage"})]})]})]}),(0,i.jsxs)("div",{className:"api-form-card",children:[(0,i.jsx)("h2",{children:"Test API Request"}),(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),c(!0),d(null),m(!1);try{const t=await fetch("https://portfolio-backend-jet-phi.vercel.app/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,status:a}),mode:"cors"});if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));m(!0),s(""),n("")}catch(l){console.error("API Error:",l),"TypeError"===l.name&&l.message.includes("Failed to fetch")?d("CORS Error: Backend server needs to allow requests from this domain. API is currently blocked by browser security policy."):d("Failed to send message: ".concat(l.message))}finally{c(!1)}},className:"api-form",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"message",children:"Message Content"}),(0,i.jsx)("input",{type:"text",id:"message",value:e,onChange:e=>s(e.target.value),placeholder:"Enter your test message...",required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"status",children:"Status Type"}),(0,i.jsxs)("select",{id:"status",value:a,onChange:e=>n(e.target.value),required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select status type..."}),(0,i.jsx)("option",{value:"success",children:"Success"}),(0,i.jsx)("option",{value:"error",children:"Error"}),(0,i.jsx)("option",{value:"info",children:"Info"}),(0,i.jsx)("option",{value:"warning",children:"Warning"})]})]}),(0,i.jsx)("button",{type:"submit",disabled:r,className:"submit-btn",children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"loading-spinner"}),"Sending Request..."]}):"Send API Request"}),o&&(0,i.jsx)("div",{className:"status-message success",children:"\u2705 Message sent successfully! Check the database to see your entry."}),l&&(0,i.jsxs)("div",{className:"status-message error",children:["\u274c ",l]})]})]})]})]}),h&&(0,i.jsx)("div",{className:"modal-overlay",onClick:v,children:(0,i.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h2",{children:"Database Messages"}),(0,i.jsx)("button",{className:"close-btn",onClick:v,children:"\xd7"})]}),(0,i.jsx)("div",{className:"modal-body",children:0===p.length?(0,i.jsx)("p",{className:"no-messages",children:"No messages found in the database."}):(0,i.jsx)("div",{className:"messages-list",children:p.map(((e,s)=>{var a;return(0,i.jsxs)("div",{className:"message-item",children:[(0,i.jsxs)("div",{className:"message-header",children:[(0,i.jsx)("span",{className:"status-badge ".concat(e.status),children:(null===(a=e.status)||void 0===a?void 0:a.toUpperCase())||"UNKNOWN"}),(0,i.jsx)("span",{className:"message-date",children:e.created_at?new Date(e.created_at).toLocaleString():e.timestamp?new Date(e.timestamp).toLocaleString():"Unknown date"})]}),(0,i.jsx)("div",{className:"message-content",children:e.message||"No message content"}),e.id&&(0,i.jsxs)("div",{className:"message-id",children:["ID: ",e.id]})]},s)}))})})]})})]})})}}}]);
//# sourceMappingURL=888.1ffcd581.chunk.js.map